<!-- 
	=> 입력한 아이디, 암호를 가지고 비동기 방식으로
		서버와 통신하여 아이디, 암호의 존재 여부를 확인해본다.
-->
<html>
	<meta charset="UTF-8">
	<head>
		<script src="jquery-1.11.0.min.js"></script>
		<script>
			function checkLogin(){
				//----------------------------------------------
				// 입력한 이이디를 얻어 변수에 저장
				//----------------------------------------------
				var uid = $(".uid").val();
				//----------------------------------------------
				// 만약 아이디가 비어 있으면 경고하고, 비우고, 커서 들여놓고 함수중단
				//----------------------------------------------
				if (uid.split(" ").join("")==""){
					alert("아이디 입력요망");
					$(".uid").val("");
					$(".uid").focus();
					return;
				}
				//----------------------------------------------
				// 입력한 암호를 얻어 변수에 저장
				//----------------------------------------------
				var pwd = $(".pwd").val();
				//----------------------------------------------
				// 만약 암호가 비어 있으면 경고하고, 비우고, 커서 들여놓고 함수중단
				//----------------------------------------------
				if (pwd.split(" ").join("")==""){
					alert("암호 입력요망");
					$(".pwd").val("");
					$(".pwd").focus();
					return;
				}
				//----------------------------------------------
				// 아이디, 암호의 존재여부를 비동기 방식으로 웹서버의 url인
				// html/checkLogin.html 로 접근하여 checkLogin.html파일을 얻어온다
				// checkLogin.html 파일 안에는 아이디, 암호의 존재 개수가 포함되어 있다.
				// 원래는 서버쪽 자원을 호출하여야 하나 배우지 않은 관계로 html 호출로 대체한다
				// <참고>{} 영역은 1회성 사용자 정의 객체를 의미한다
				// var 객참변수 = {속성변수:데이터, 속성변수:데이터,~ }
				//----------------------------------------------
				$.ajax({
					//----------------------------------------------
					// 서버쪽 호출 URL 주소
					//----------------------------------------------
					url : "html/checkLogin.html"
					//----------------------------------------------
					// form 태그 안의 데이터를 서버로 보내는 방법 지정 설정
					//----------------------------------------------
					,type : "post"
					//----------------------------------------------
					// 서버에 보낼 데이터를 설정
					//----------------------------------------------
					,data : "uid=" + uid + "&pwd=" + pwd
					//,data : {"uid":uid, "pwd":pwd} //JSON 표현방법
					//,data:$("[name=loginForm]").serialize();
					//----------------------------------------------
					// 서버가 응답할 페이지 종류, html일 경우 생략 가능
					//----------------------------------------------
					,dataType : "html"
					//----------------------------------------------
					// 서버가 응답을 성공적으로 보냈을 경우 실행할 익명함수 설정
					// 익명함수의 매개변수에는 서버의 응답물이 저장된 HTML 소스가 들어옴.
					//----------------------------------------------
					,success : function(html){
						// 매개변수 html에 저장된 HTML소스를 실행하여
						// 웹화면에 출력되는 문자열을 리턴받는다
						var cnt = $(html).text();
						// 만약 cnt 변수안의 데이터 1이면, 즉 아이디/암호 존재개수가 1이면
						if (cnt == 1){
							alert("로그인 성공");
							location.replace("html/main.html");
						}
						// 만약 cnt변수 안의 데이터 1이 아니면, 즉 아이디/암호 존재개수가 1이 아니면
						else{
							alert("로그인 실패");
							$(".uid").val("");
							$(".pwd").val("");
							$(".uid").focus();
						}
					}
				});
			}
		</script>
	</head>
	
	<body><center>
		<form name="loginForm" action="">
			[회원가입]
			<table border="1" cellpadding="5">
			<tr>
				<td>아이디
				<td><input type="text" class="uid" name="uid">
			<tr>
				<td>암호
				<td><input type="password" class="pwd" name="pwd">
			</table><br>
			<input type="button" value="로그인" onClick="checkLogin();">
		</form>
	</body>
</html>





